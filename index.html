<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>For You ‚ù§Ô∏è</title>

<style>
* { box-sizing: border-box; }
body {
  background: linear-gradient(135deg, #ff758c, #ff7eb3);
  font-family: Arial, sans-serif;
  color: white;
  text-align: center;
  height: 100vh;
  margin: 0;
  overflow: hidden;
  position: relative;
}

h1 {
  margin-top: 40px;
  font-size: 36px;
}

.btn {
  padding: 14px 26px;
  font-size: 18px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  position: absolute;
}

.no {
  background: #ff4d6d;
  color: white;
  top: 400px;
  left: 50%;
  transform: translateX(-50%);
}

.yes {
  background: white;
  color: #ff4d6d;
  bottom: 400px;
  left: 50%;
  transform: translateX(-50%);
}

#izanamiOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: black;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999999;
  overflow: hidden;
}

#izanamiGif {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

#izanamiText {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 90px;
  font-weight: 900;
  letter-spacing: 6px;
  color: white;
  text-shadow: 0 0 20px red, 0 0 40px red, 0 0 60px black;
  opacity: 0;
  animation: fadeInSlow 1.2s ease-in forwards;
  pointer-events: none;
  z-index: 10000000;
}

@keyframes fadeInSlow {
  0% { opacity: 0; transform: translateX(-50%) translateY(40px); }
  100% { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.yes-clone {
  position: absolute;
  padding: 15px 28px;
  background: white;
  color: #ff4d6d;
  border-radius: 999px;
  font-size: 18px;
  border: none;
  cursor: pointer;
  z-index: 9999999;
  animation: pulseGlow 1.2s infinite;
}

@keyframes pulseGlow {
  0% { box-shadow: 0 0 10px red; }
  50% { box-shadow: 0 0 25px red; }
  100% { box-shadow: 0 0 10px red; }
}
</style>
</head>
<body>

<h1 id="mainTitle">Will you be my Valentine? ‚ù§Ô∏è</h1>

<button class="btn no" id="noBtn">No ü•∫</button>
<button class="btn yes" id="yesBtn" onclick="location.href='yes.html'">Yes üíñ</button>

<div id="izanamiOverlay">
  <img id="izanamiGif" src="img/izanami.gif" alt="Izanami">
  <div id="izanamiText">IZANAMI!!!</div>
</div>

<script>

let runCount = parseInt(localStorage.getItem("runCount") || "0");


if (runCount < 0 || runCount > 2) {
  runCount = 0;
  localStorage.setItem("runCount", "0");
}

const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const mainTitle = document.getElementById("mainTitle");
const izanamiOverlay = document.getElementById("izanamiOverlay");
const izanamiGif = document.getElementById("izanamiGif");
const izanamiText = document.getElementById("izanamiText");

let noCount = 0;
let cloneMode = false;

if (runCount === 2) {
  yesBtn.style.display = "none";
  noBtn.style.display = "none";
  mainTitle.innerText = "Izanagi Reality Overwrite!";

  for (let i = 0; i < 25; i++) {
    let y = document.createElement("button");
    y.classList.add("yes-clone");
    y.innerText = "YES üíñ";
    y.style.left = Math.random() * (window.innerWidth - 150) + "px";
    y.style.top  = Math.random() * (window.innerHeight - 80) + "px";
    y.onclick = () => location.href = "yes.html";
    document.body.appendChild(y);
  }

  localStorage.setItem("runCount", "0");
}

function moveNoButton() {
  const maxX = window.innerWidth - noBtn.offsetWidth - 20;
  const maxY = window.innerHeight - noBtn.offsetHeight - 20;
  noBtn.style.left = Math.random() * maxX + "px";
  noBtn.style.top  = Math.random() * maxY + "px";
}

function showPopup(text, duration = 3000) {
  const popup = document.createElement("div");
  popup.innerText = text;
  popup.style.position = "fixed";
  popup.style.top = "50%";
  popup.style.left = "50%";
  popup.style.transform = "translate(-50%, -50%)";
  popup.style.padding = "20px 30px";
  popup.style.background = "rgba(0,0,0,0.8)";
  popup.style.color = "white";
  popup.style.borderRadius = "20px";
  popup.style.fontSize = "22px";
  popup.style.zIndex = 9999;
  popup.style.transition = "opacity 2s";

  document.body.appendChild(popup);
  setTimeout(() => popup.style.opacity = 0, duration - 500);
  setTimeout(() => popup.remove(), duration);
}

function spawnClones() {
  cloneMode = true;

  for (let i = 0; i < 25; i++) {
    const clone = noBtn.cloneNode(true);
    clone.innerText = "No ü•∫";
    clone.style.position = "absolute";
    clone.style.left = Math.random() * (window.innerWidth - 150) + "px";
    clone.style.top  = Math.random() * (window.innerHeight - 100) + "px";
    clone.addEventListener("mouseenter", () => clone.remove());
    document.body.appendChild(clone);
  }

  const yesRect = yesBtn.getBoundingClientRect();
  noBtn.style.left = yesRect.left + 120 + "px";
  noBtn.style.top  = yesRect.top - 20 + "px";
}

noBtn.addEventListener("mouseenter", () => {
  if (cloneMode) return;

  noCount++;
  if (noCount === 10) {
    showPopup("Shadow Clone Jutsu!", 3000);
    setTimeout(spawnClones, 500);
    return;
  }

  moveNoButton();
});

noBtn.addEventListener("click", () => {
  if (!cloneMode) {
    location.href = "no.html";
    return;
  }

  triggerIzanamiOrIzanagi();
});

function triggerIzanamiOrIzanagi() {
  izanamiOverlay.style.display = "flex";

  if (runCount === 0) {
    izanamiText.innerText = "IZANAMI!!!";
    izanamiGif.style.transform = "scaleX(1)";
  }
  else if (runCount === 1) {
    izanamiText.innerText = "IZANAGI!!!";
    izanamiGif.style.transform = "scaleX(-1)";
  }

  runCount++;
  localStorage.setItem("runCount", runCount.toString());

  setTimeout(() => {
    location.reload();
  }, 3000);
}
</script>

</body>
</html>
